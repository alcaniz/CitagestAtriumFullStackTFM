(function(){"use strict";var t={6801:function(t,e,a){var n=a(9963),o=a(6252);const i={id:"app"};function r(t,e,a,n,r,p){const l=(0,o.up)("router-link"),s=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("nav",null,[(0,o.Wm)(l,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("LISTA DE CITAS")])),_:1}),(0,o.Wm)(l,{to:""},{default:(0,o.w5)((()=>[(0,o.Uk)("|")])),_:1}),(0,o.Uk)(" | "),(0,o.Wm)(l,{to:"/calendario"},{default:(0,o.w5)((()=>[(0,o.Uk)("RESERVAR CITA")])),_:1})]),(0,o.Wm)(s)])}var p={name:"App"},l=a(3744);const s=(0,l.Z)(p,[["render",r]]);var c=s,m=a(2201),u=a(3577);const d=t=>((0,o.dD)("data-v-5df62ffa"),t=t(),(0,o.Cn)(),t),f={class:"appointments-list"},h=d((()=>(0,o._)("h2",null,"Lista de citas",-1))),g={key:0},b={key:1},y={key:2},v=["onClick"],_=["onClick"];function w(t,e,a,n,i,r){return(0,o.wg)(),(0,o.iD)("div",f,[h,i.loading?((0,o.wg)(),(0,o.iD)("div",g,"Cargando...")):(0,o.kq)("",!0),i.loading||0!==i.appointments.length?((0,o.wg)(),(0,o.iD)("ul",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.appointments,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id},[(0,o.Uk)((0,u.zw)(t.nombre)+" - "+(0,u.zw)(t.email)+" - "+(0,u.zw)(t.fecha)+" - "+(0,u.zw)(t.hora)+" ",1),(0,o._)("button",{class:"modify",onClick:e=>r.modifyAppointment(t.id)},"Modificar",8,v),(0,o._)("button",{class:"delete",onClick:e=>r.deleteAppointment(t.id)},"Eliminar",8,_)])))),128))])):((0,o.wg)(),(0,o.iD)("div",b,"No hay citas registradas."))])}a(560);var D={name:"AppointmentsList",data(){return{appointments:[],loading:!1}},created(){this.fetchAppointments()},methods:{async fetchAppointments(){this.loading=!0;try{const t=await fetch("/api/get_appointments.php"),e=await t.json();e.success?this.appointments=e.appointments:alert(e.message||"Error al cargar citas"),this.loading=!1}catch(t){console.error("Error:",t),alert("Hubo un error al cargar las citas"),this.loading=!1}},modifyAppointment(t){this.$router.push({path:`/modify-appointment/${t}`})},deleteAppointment(t){confirm("¿Estás seguro de que quieres eliminar esta cita?")&&fetch("/api/delete_appointment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((t=>t.json())).then((t=>{"La cita ha sido eliminada."===t.message?(alert("La cita ha sido eliminada correctamente."),this.fetchAppointments()):alert(t.message)})).catch((t=>{console.error("Error:",t),alert("Hubo un error al eliminar la cita")}))}}};const k=(0,l.Z)(D,[["render",w],["__scopeId","data-v-5df62ffa"]]);var A=k;const C=t=>((0,o.dD)("data-v-6e066356"),t=t(),(0,o.Cn)(),t),O={class:"header-image"},S=["src"],T={id:"app",class:"container mt-5"},x=C((()=>(0,o._)("h1",{class:"mb-4 text-center"},"Registro de citas",-1))),U={class:"form-group"},E=C((()=>(0,o._)("label",{for:"name"},"Nombre:",-1))),j={class:"form-group"},q=C((()=>(0,o._)("label",{for:"email"},"Correo electrónico:",-1))),z={class:"form-group"},H=C((()=>(0,o._)("label",{for:"date"},"Fecha:",-1))),I={class:"form-group"},L=C((()=>(0,o._)("label",{for:"time"},"Hora:",-1))),M=C((()=>(0,o._)("button",{type:"submit",class:"btn btn-primary btn-block"},"Registrar Cita",-1)));function V(t,e,i,r,p,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",O,[(0,o._)("img",{src:a(3618),alt:"CITAGEST"},null,8,S)]),(0,o._)("div",T,[x,(0,o._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,o._)("div",U,[E,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>p.appointment.name=t),required:""},null,512),[[n.nr,p.appointment.name]])]),(0,o._)("div",j,[q,(0,o.wy)((0,o._)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>p.appointment.email=t),required:""},null,512),[[n.nr,p.appointment.email]])]),(0,o._)("div",z,[H,(0,o.wy)((0,o._)("input",{type:"date",class:"form-control",id:"date","onUpdate:modelValue":e[2]||(e[2]=t=>p.appointment.date=t),required:""},null,512),[[n.nr,p.appointment.date]])]),(0,o._)("div",I,[L,(0,o.wy)((0,o._)("input",{type:"time",class:"form-control",id:"time","onUpdate:modelValue":e[3]||(e[3]=t=>p.appointment.time=t),required:""},null,512),[[n.nr,p.appointment.time]])]),M],32)])],64)}a(8858),a(1318),a(3228);var R={name:"AppointmentForm",data(){return{appointment:{name:"",email:"",date:"",time:""}}},methods:{async submitForm(){try{const t=await fetch("/api/register_appointment.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(this.appointment)}),e=await t.text();console.log(e),alert("Cita registrada con éxito"),this.$router.push("/")}catch(t){console.error("Error al registrar la cita:",t),alert("Hubo un error al registrar la cita")}}}};const F=(0,l.Z)(R,[["render",V],["__scopeId","data-v-6e066356"]]);var P=F;const Z={id:"appointment-modifier",class:"container mt-5"},$={class:"header-image"},N=["src"],W=(0,o._)("h1",{class:"mb-4 text-center"},"Modificar Cita",-1),G={class:"form-group"},Y=(0,o._)("label",{for:"input-nombre"},"Nombre:",-1),J={class:"form-group"},K=(0,o._)("label",{for:"input-email"},"Correo electrónico:",-1),B={class:"form-group"},Q=(0,o._)("label",{for:"input-date"},"Fecha:",-1),X={class:"form-group"},tt=(0,o._)("label",{for:"input-time"},"Hora:",-1),et=(0,o._)("button",{type:"submit",class:"btn btn-primary btn-block"},"Actualizar Cita",-1);function at(t,e,i,r,p,l){return(0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",$,[(0,o._)("img",{src:a(3618),alt:"CITAGEST"},null,8,N)]),W,(0,o._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>l.updateAppointment&&l.updateAppointment(...t)),["prevent"]))},[(0,o._)("div",G,[Y,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"input-nombre","onUpdate:modelValue":e[0]||(e[0]=t=>p.appointmentData.nombre=t),required:""},null,512),[[n.nr,p.appointmentData.nombre]])]),(0,o._)("div",J,[K,(0,o.wy)((0,o._)("input",{type:"email",class:"form-control",id:"input-email","onUpdate:modelValue":e[1]||(e[1]=t=>p.appointmentData.email=t),required:""},null,512),[[n.nr,p.appointmentData.email]])]),(0,o._)("div",B,[Q,(0,o.wy)((0,o._)("input",{type:"date",class:"form-control",id:"input-date","onUpdate:modelValue":e[2]||(e[2]=t=>p.appointmentData.fecha=t),required:""},null,512),[[n.nr,p.appointmentData.fecha]])]),(0,o._)("div",X,[tt,(0,o.wy)((0,o._)("input",{type:"time",class:"form-control",id:"input-time","onUpdate:modelValue":e[3]||(e[3]=t=>p.appointmentData.hora=t),required:""},null,512),[[n.nr,p.appointmentData.hora]])]),et],32)])}var nt=a(5121),ot={name:"ModifyAppointment",data(){return{appointmentData:{id:null,nombre:"",email:"",fecha:"",hora:""}}},mounted(){this.appointmentId=this.$route.params.id,this.fetchAppointmentData()},methods:{async fetchAppointmentData(){try{const t=await fetch(`/api/get_appointment.php?appointment_id=${this.appointmentId}`),e=await t.json();console.log(e),e.success?this.appointmentData=e.appointment:alert(e.message||"Error al cargar los datos de la cita")}catch(t){console.error("Error:",t),alert("Hubo un error al cargar los datos de la cita")}},updateAppointment(){console.log("Datos de la cita a actualizar:",this.appointmentData),nt.Z.post("/api/modify_appointment.php",this.appointmentData).then((t=>{console.log(t.data),alert("La cita ha sido actualizada exitosamente."),this.$router.push("/")})).catch((t=>{console.error("Hubo un error al actualizar la cita:",t),alert("Hubo un error al actualizar la cita.")}))}}};const it=(0,l.Z)(ot,[["render",at]]);var rt=it;const pt=[{path:"/",name:"ListaCitas",component:A},{path:"/calendario",name:"CalendarioReservas",component:P},{path:"/modify-appointment/:id",name:"ModifyAppointment",component:rt}],lt=(0,m.p7)({history:(0,m.r5)(),routes:pt});var st=lt,ct=a(3907),mt=(0,ct.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});nt.Z.defaults.baseURL="http://localhost",(0,n.ri)(c).use(mt).use(st).mount("#app")},3618:function(t,e,a){t.exports=a.p+"img/logo-kizuna-sticky-150x150.d6fc9f4c.png"}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,i){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],o=t[c][1],i=t[c][2];for(var p=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(p=!1,i<r&&(r=i));if(p){t.splice(c--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,r=n[0],p=n[1],l=n[2],s=0;if(r.some((function(e){return 0!==t[e]}))){for(o in p)a.o(p,o)&&(a.m[o]=p[o]);if(l)var c=l(a)}for(e&&e(n);s<r.length;s++)i=r[s],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},n=self["webpackChunkcitagest"]=self["webpackChunkcitagest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(6801)}));n=a.O(n)})();
//# sourceMappingURL=app.1b6f54a6.js.map